import{_ as l}from"./Post.071ef68c.js";import{h as o,w as c,o as r,b as s,e as a}from"./vendor.433fbd7a.js";import"./app.a28fe036.js";const m=s("div",{class:"markdown-body"},[s("h2",{id:"\u554F\u984C",tabindex:"-1",class:"text-2xl font-bold mt-2em mb-1em next:mt-0"},[s("a",{class:"header-anchor text-sky-500 dark:text-sky-400 font-medium hover:underline",href:"#\u554F\u984C","aria-hidden":"true"},"#"),a(" \u554F\u984C")]),s("p",{class:"my-1.25em last:mt-0 first:mb-0 leading-[1.75]"},"\u5982\u4F55\u5728 Dovecot \u548C Exim \u4E0A\u4F7F\u7528\u591A\u500B SSL \u8B49\u66F8\uFF1F"),s("h2",{id:"\u74B0\u5883",tabindex:"-1",class:"text-2xl font-bold mt-2em mb-1em next:mt-0"},[s("a",{class:"header-anchor text-sky-500 dark:text-sky-400 font-medium hover:underline",href:"#\u74B0\u5883","aria-hidden":"true"},"#"),a(" \u74B0\u5883")]),s("p",{class:"my-1.25em last:mt-0 first:mb-0 leading-[1.75]"},"VestaCP 0.9.8-24"),s("h2",{id:"\u539F\u56E0",tabindex:"-1",class:"text-2xl font-bold mt-2em mb-1em next:mt-0"},[s("a",{class:"header-anchor text-sky-500 dark:text-sky-400 font-medium hover:underline",href:"#\u539F\u56E0","aria-hidden":"true"},"#"),a(" \u539F\u56E0")]),s("p",{class:"my-1.25em last:mt-0 first:mb-0 leading-[1.75]"},"\u9ED8\u8A8D\u914D\u7F6E\u50C5\u5141\u8A31\u4E00\u5C0D SSL \u8B49\u66F8\u3002"),s("h2",{id:"\u89E3\u6C7A\u8FA6\u6CD5",tabindex:"-1",class:"text-2xl font-bold mt-2em mb-1em next:mt-0"},[s("a",{class:"header-anchor text-sky-500 dark:text-sky-400 font-medium hover:underline",href:"#\u89E3\u6C7A\u8FA6\u6CD5","aria-hidden":"true"},"#"),a(" \u89E3\u6C7A\u8FA6\u6CD5")]),s("p",{class:"my-1.25em last:mt-0 first:mb-0 leading-[1.75]"},"\u5047\u8A2D\u6211\u5011\u73FE\u5728\u6709\u5169\u500B\u7DB2\u57DF"),s("ul",{class:"my-1.25em list-disc list-inside px-2"},[s("li",{class:"my-0.5em"},"cat.com"),s("li",{class:"my-0.5em"},"dog.com")]),s("p",{class:"my-1.25em last:mt-0 first:mb-0 leading-[1.75]"},"\u4ED6\u5011\u7684\u6191\u8B49\u5206\u5225\u662F"),s("ul",{class:"my-1.25em list-disc list-inside px-2"},[s("li",{class:"my-0.5em"},"cat.com.crt"),s("li",{class:"my-0.5em"},"cat.com.key"),s("li",{class:"my-0.5em"},"dog.com.crt"),s("li",{class:"my-0.5em"},"dog.com.key")]),s("p",{class:"my-1.25em last:mt-0 first:mb-0 leading-[1.75]"},[a("\u5C07\u6240\u6709\u6191\u8B49\u8907\u88FD\u5230 "),s("code",null,"/usr/local/vesta/ssl/")]),s("pre",{class:"language-bash"},[s("code",{class:"language-bash"},[s("span",{class:"token function"},"scp"),a(` /path/to/\u6191\u8B49/* Username@Vesta-IP:/usr/local/vesta/ssl/
`)])]),s("p",{class:"my-1.25em last:mt-0 first:mb-0 leading-[1.75]"},[a("\u5207\u63DB\u76EE\u9304\u5230 "),s("code",null,"/usr/local/vesta/ssl/"),a(" \u5F8C\u8A2D\u5B9A\u6B0A\u9650\uFF1A")]),s("pre",{class:"language-bash"},[s("code",{class:"language-bash"},[s("span",{class:"token function"},"chmod"),a(),s("span",{class:"token number"},"660"),a(` ./*
`),s("span",{class:"token function"},"chown"),a(` root:mail ./*
`)])]),s("h3",{id:"exim",tabindex:"-1",class:"text-xl font-semibold mt-1.6em mb-0.6em next:mt-0"},[s("a",{class:"header-anchor text-sky-500 dark:text-sky-400 font-medium hover:underline",href:"#exim","aria-hidden":"true"},"#"),a(" Exim")]),s("p",{class:"my-1.25em last:mt-0 first:mb-0 leading-[1.75]"},"\u5230 Vesta \u63A7\u5236\u9762\u677F\uFF0C\u9EDE\u9078\u53F3\u4E0A\u8173 Server -> Exim4 -> CONFIGURE \u627E\u5230\u4E0B\u5217\u4E09\u884C\uFF1A"),s("pre",{class:"language-bash"},[s("code",{class:"language-bash"},[a("tls_advertise_hosts "),s("span",{class:"token operator"},"="),a(` *
`),s("span",{class:"token assign-left variable"},"tls_certificate"),s("span",{class:"token operator"},"="),a(" /usr/local/vesta/ssl/certificate.crt  "),s("span",{class:"token comment"},"#\u8A3B\u89E3\u6216\u522A\u9664"),a(`
`),s("span",{class:"token assign-left variable"},"tls_privatekey"),s("span",{class:"token operator"},"="),a(" /usr/local/vesta/ssl/certificate.key   "),s("span",{class:"token comment"},"#\u8A3B\u89E3\u6216\u522A\u9664"),a(`
`)])]),s("p",{class:"my-1.25em last:mt-0 first:mb-0 leading-[1.75]"},"\u4FEE\u6539\u6210"),s("pre",{class:"language-bash"},[s("code",{class:"language-bash"},[a("tls_advertise_hosts "),s("span",{class:"token operator"},"="),a(` *
tls_certificate `),s("span",{class:"token operator"},"="),a(),s("span",{class:"token variable"},[a("${if exists{"),s("span",{class:"token operator"},"/"),a("usr"),s("span",{class:"token operator"},"/"),a("local"),s("span",{class:"token operator"},"/"),a("vesta"),s("span",{class:"token operator"},"/"),a("ssl"),s("span",{class:"token operator"},"/"),a("${tls_sni}")]),a(".crt"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},"{"),a("/usr/local/vesta/ssl/"),s("span",{class:"token variable"},"${tls_sni}"),a(".crt"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},"{"),a("/usr/local/vesta/ssl/certificate.crt"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},"}"),a(`
tls_privatekey `),s("span",{class:"token operator"},"="),a(),s("span",{class:"token variable"},[a("${if exists{"),s("span",{class:"token operator"},"/"),a("usr"),s("span",{class:"token operator"},"/"),a("local"),s("span",{class:"token operator"},"/"),a("vesta"),s("span",{class:"token operator"},"/"),a("ssl"),s("span",{class:"token operator"},"/"),a("${tls_sni}")]),a(".key"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},"{"),a("/usr/local/vesta/ssl/"),s("span",{class:"token variable"},"${tls_sni}"),a(".key"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},"{"),a("/usr/local/vesta/ssl/certificate.key"),s("span",{class:"token punctuation"},"}"),s("span",{class:"token punctuation"},"}"),a(`
`)])]),s("p",{class:"my-1.25em last:mt-0 first:mb-0 leading-[1.75]"},"\u52FE\u9078 Restart \u5F8C\uFF0C\u6309\u4E0B Save \u5132\u5B58\u3002"),s("h3",{id:"dovecot",tabindex:"-1",class:"text-xl font-semibold mt-1.6em mb-0.6em next:mt-0"},[s("a",{class:"header-anchor text-sky-500 dark:text-sky-400 font-medium hover:underline",href:"#dovecot","aria-hidden":"true"},"#"),a(" Dovecot")]),s("p",{class:"my-1.25em last:mt-0 first:mb-0 leading-[1.75]"},[a("\u5230 Vesta \u63A7\u5236\u9762\u677F\uFF0C\u9EDE\u9078\u53F3\u4E0A\u8173 Server -> dovecot -> CONFIGURE \u627E\u5230 "),s("code",null,"/etc/dovecot/conf.d/10-ssl.conf"),a(" \u4FEE\u6539\u6210\uFF1A")]),s("pre",{class:"language-bash"},[s("code",{class:"language-bash"},[s("span",{class:"token comment"},"# --------\u65B0\u589E--------#"),a(`
local_name cat.com `),s("span",{class:"token punctuation"},"{"),a(`
  ssl_cert `),s("span",{class:"token operator"},"="),a(),s("span",{class:"token operator"},"<"),a(`/usr/local/vesta/ssl/cat.com.crt
  ssl_key `),s("span",{class:"token operator"},"="),a(),s("span",{class:"token operator"},"<"),a(`/usr/local/vesta/ssl/cat.com.key
`),s("span",{class:"token punctuation"},"}"),a(`

local_name dog.com `),s("span",{class:"token punctuation"},"{"),a(`
  ssl_cert `),s("span",{class:"token operator"},"="),a(),s("span",{class:"token operator"},"<"),a(`/usr/local/vesta/ssl/dog.com.crt
  ssl_key `),s("span",{class:"token operator"},"="),a(),s("span",{class:"token operator"},"<"),a(`/usr/local/vesta/ssl/dog.com.key
`),s("span",{class:"token punctuation"},"}"),a(`
`),s("span",{class:"token comment"},"#--------------------#"),a(`
ssl `),s("span",{class:"token operator"},"="),a(),s("span",{class:"token function"},"yes"),a(`
ssl_cert `),s("span",{class:"token operator"},"="),a(),s("span",{class:"token operator"},"<"),a(`/usr/local/vesta/ssl/certificate.crt
ssl_key `),s("span",{class:"token operator"},"="),a(),s("span",{class:"token operator"},"<"),a(`/usr/local/vesta/ssl/certificate.key
`)])]),s("p",{class:"my-1.25em last:mt-0 first:mb-0 leading-[1.75]"},"\u52FE\u9078 Restart \u5F8C\uFF0C\u6309\u4E0B Save \u5132\u5B58\u3002"),s("h3",{id:"\u6E2C\u8A66",tabindex:"-1",class:"text-xl font-semibold mt-1.6em mb-0.6em next:mt-0"},[s("a",{class:"header-anchor text-sky-500 dark:text-sky-400 font-medium hover:underline",href:"#\u6E2C\u8A66","aria-hidden":"true"},"#"),a(" \u6E2C\u8A66")]),s("p",{class:"my-1.25em last:mt-0 first:mb-0 leading-[1.75]"},"\u5B8C\u6210\u5F8C\u8A18\u5F97\u6E2C\u8A66\u6191\u8B49\u662F\u5426\u6709\u6B63\u78BA\u5B89\u88DD\uFF0C\u8981\u6E2C\u8A66\u5F88\u7C21\u55AE\uFF1A"),s("pre",{class:"language-bash"},[s("code",{class:"language-bash"},[s("span",{class:"token comment"},"#\u6E2C\u8A66IMAP"),a(`
openssl s_client -showcerts -connect mail.example.com:993
`),s("span",{class:"token comment"},"#\u6E2C\u8A66SMTP"),a(`
openssl s_client -showcerts -connect mail.example.com:465
`)])]),s("p",{class:"my-1.25em last:mt-0 first:mb-0 leading-[1.75]"},"\u5982\u679C\u6709\u6191\u8B49\u8CC7\u8A0A\u8DD1\u51FA\u4F86\u6838\u5C0D\u4E00\u4E0B\u6B63\u78BA\u5C31\u662F\u6210\u529F\u4E86\uFF0C\u5931\u6557\u7684\u8A71\u56DE\u53BB\u4E0A\u9762\u770B\u4E00\u4E0B\u662F\u4E0D\u662F\u5C11\u505A\u4E86\u4EC0\u9EBC\u6B65\u9A5F\u3002"),s("p",{class:"my-1.25em last:mt-0 first:mb-0 leading-[1.75]"},"\u4EE5\u4E0A\u3002"),s("h2",{id:"\u53C3\u8003\u8CC7\u6599",tabindex:"-1",class:"text-2xl font-bold mt-2em mb-1em next:mt-0"},[s("a",{class:"header-anchor text-sky-500 dark:text-sky-400 font-medium hover:underline",href:"#\u53C3\u8003\u8CC7\u6599","aria-hidden":"true"},"#"),a(" \u53C3\u8003\u8CC7\u6599")]),s("p",{class:"my-1.25em last:mt-0 first:mb-0 leading-[1.75]"},[s("a",{href:"https://help.atmail.com/hc/en-us/articles/115009208748-Multiple-SSL-certs-with-Dovecot-Exim",class:"text-sky-500 dark:text-sky-400 font-medium hover:underline",target:"_blank",rel:"noopener"},"MULTIPLE SSL CERTS WITH DOVECOT & EXIM")]),s("p",{class:"my-1.25em last:mt-0 first:mb-0 leading-[1.75]"},[s("a",{href:"https://support.plesk.com/hc/ja/articles/213961665-IMAP-POP3-SMTP-%E7%94%A8%E3%81%AB-SSL-%E3%81%8C%E6%A9%9F%E8%83%BD%E3%81%97-%E9%81%A9%E5%88%87%E3%81%AA%E8%A8%BC%E6%98%8E%E6%9B%B8%E3%81%8C%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%95%E3%82%8C%E3%81%A6%E3%81%84%E3%82%8B%E3%81%93%E3%81%A8%E3%82%92%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B%E3%81%AB%E3%81%AF",class:"text-sky-500 dark:text-sky-400 font-medium hover:underline",target:"_blank",rel:"noopener"},"IMAP/POP3/SMTP \u7528\u306B SSL \u304C\u6A5F\u80FD\u3057\u3001\u9069\u5207\u306A\u8A3C\u660E\u66F8\u304C\u30A4\u30F3\u30B9\u30C8\u30FC\u30EB\u3055\u308C\u3066\u3044\u308B\u3053\u3068\u3092\u78BA\u8A8D\u3059\u308B\u306B\u306F")])],-1),f={setup(i,{expose:t}){const e={title:"VestaCP Mail Server\u8A2D\u5B9A\u5169\u500BSSL\u6191\u8B49",author:"hanlee",type:"post",lang:"zh-TW",date:"2019-04-26T19:00:40.000Z",description:"\u5982\u4F55\u5728Dovecot\u548CExim\u4E0A\u4F7F\u7528\u591A\u500BSSL\u8B49\u66F8\uFF1F",url:"/\u5728vestacp\u7684mail-server\u8A2D\u5B9A\u5169\u500Bssl\u6191\u8B49/",image:"/images/2019/04/Email-Server.png",categories:["VestaCP"],tags:["Dovecot","Exim","IMAP","Mail","SMTP","SSL","VestaCP"]};return t({frontmatter:e}),(p,d)=>{const n=l;return r(),o(n,{frontmatter:e},{default:c(()=>[m]),_:1})}}};export{f as default};
